library('data.table')
library('DBI')
library('doParallel')
library('httr')
library('magrittr')
library('RPostgres')
library('stringr')
library('xml2')
sessionInfo()
?dbAppendTable
?RPostgres
?dcast
?dbConnect
?postgres
?Postgres
library(usethis)
?use_gpl3_license
library(pubmedparser)
pmXml = read_xml('pubmed20n1014.xml.gz')
pmXml = xml_find_all(pmXml, './/PubmedArticle')
idx = 1:length(pmXml)
x2 = xml_find_all(pmXml[idx], './/Author')
n_authors = xml_length(xml_find_first(pmXml[idx], './/AuthorList'))
dAuthors = data.table(
pmid = rep.int(pmids[idx], n_authors),
last_name = xml_text(xml_find_first(x2, './/LastName')),
fore_name = xml_text(xml_find_first(x2, './/ForeName')),
initials = xml_text(xml_find_first(x2, './/Initials')),
suffix = xml_text(xml_find_first(x2, './/Suffix')),
collective_name = xml_text(xml_find_first(x2, './/CollectiveName')))
dAuthors[, author_pos := 1:.N, by = pmid]
setcolorder(dAuthors, c('pmid', 'author_pos'))
pmids = idx
dAuthors = data.table(
pmid = rep.int(pmids[idx], n_authors),
last_name = xml_text(xml_find_first(x2, './/LastName')),
fore_name = xml_text(xml_find_first(x2, './/ForeName')),
initials = xml_text(xml_find_first(x2, './/Initials')),
suffix = xml_text(xml_find_first(x2, './/Suffix')),
collective_name = xml_text(xml_find_first(x2, './/CollectiveName')))
dAuthors[, author_pos := 1:.N, by = pmid]
setcolorder(dAuthors, c('pmid', 'author_pos'))
View(dAuthors)
dAuthors[!is.na(suffix)]
dAuthors[!is.na(collective_name)]
